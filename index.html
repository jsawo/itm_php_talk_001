<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reset.css">
		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/night.css"> <!-- black / white / league / beige / sky / night / serif / simple / solarized -->

		<!-- Theme used for syntax highlighting of code -->
		<!-- <link rel="stylesheet" href="lib/css/monokai.css"> -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

				<!-- ###################################### OOP ###################################### -->

				<section>
					<section>
						<p class="fragment" data-fragment-index="2">Refleksja</p>
						<img src="lib/imgs/reflection_001.gif" />

						<aside class="notes">
							intro
						</aside>
					</section>

					<section>
						Refleksja?

						<aside class="notes">
							<p>PYT: Co to jest refleksja?</p>
							<p>zdolność programu do analizy/modyfikacji własnej struktury podczas jego uruchomienia</p>
						</aside>
					</section>

					<section>
						<code>get_class($user)</code>
						<code>get_class_methods(User::class)</code>
						<code>method_exists($user, 'promoteToAdmin')</code>

						<aside class="notes">
							<p>proste funkcje globalne w PHP - namiastka refleksji</p>
						</aside>
					</section>

					<section>
						<h3>Reflection API</h3>
						<p>$reflector = new ReflectionObject($user)</p>
						<p>$doc = new ReflectionMethod(User::class)->getDocComment()</p>

						<aside class="notes">
							<p>poważniejsza refleksja z Reflection API</p>
						</aside>
					</section>

					<section>
						<h3>Ograniczenia?</h3>
					
						<aside class="notes">
							<p>__CALL()</p>
							<p>dodawanie / usuwanie metod (runkit extension)</p>
						</aside>
					</section>

					<section>
						<h3>Przykłady</h3>

						<p>Laravel (DI, macros itp.)</p>
						<p>phpDocumentor</p>
						<p>PHPUnit</p>
						<p>Mockery</p>
						<p>mpociot/laravel-test-factory-helper</p>
					</section>
				</section>

				<!-- ###################################### PHP ###################################### -->

				<section data-markdown>
					<textarea data-template>
						## PHP ??
				
						Note:
						- co tutaj?
					</textarea>
				</section>

				<!-- ###################################### LARAVEL ###################################### -->

				<section data-markdown>
					<section>
						<p class="fragment" data-fragment-index="2">tap()</p>
						<img src="lib/imgs/tap_001.gif" />
					
						<aside class="notes">
							intro
						</aside>
					</section>

					<section>
						<p>tap()?</p>
					
						<aside class="notes">
							<p>co to? dyskusja?</p>
							<ul>
								<li>zapożyczona z rubiego</li>
								<li>może być kontrowersyjna</li>
								<li>zależnie od użycia, może zmniejszać albo zwiększać czytelność kodu</li>
							</ul>
							<p>funkcja z dwoma* argumentami, która wywołuje callback (2gi arg) podając mu pierwszy argument i zwraca wartość podaną w pierwszym argumencie</p>
						</aside>
					</section>

					<section>
						<p>może bardziej w tym klimacie przykład? $user = tap($user)->update($request->all());</p>
						<pre><code class="php" data-trim data-noescape>
							public function withoutTap()
							{
								$user = new User();
								$user->save();
								return $user;
							}
						</code></pre>

						<aside class="notes">
							wersja bez tap - wymaga stworzenia zmiennej tymczasowej tylko po to by wywołać na niej metodę
						</aside>
					</section>

					<section>
						<pre><code class="php" data-trim data-noescape>
							public function withTapA()
							{
								return tap(new User(), function($user) {
									$user->save();
								});
							}
						</code></pre>

						<aside class="notes">
							wersja z tap - 1
						</aside>
					</section>

					<section>
						<pre><code class="php" data-trim data-noescape>
							public function withTapB()
							{
								return tap(new User())->save();
							}
						</code></pre>

						<aside class="notes">
							wersja z tap - 2 - pod spodek użyje 
						</aside>
					</section>

					<section>
						<pre><code class="php" data-trim data-noescape>
							function tap($value, $callback)
							{
								$callback($value);

								return $value;
							}
						</code></pre>

						<aside class="notes">
							uproszczona implementacja (bez HigherOrderTapProxy) 
						</aside>
					</section>

					<section>
						<pre><code class="php" data-trim data-noescape>
							function tap($value, $callback = null)
							{
								if (is_null($callback)) {
									return new HigherOrderTapProxy($value);
								}

								$callback($value);

								return $value;
							}
						</code></pre>

						<aside class="notes">
							<p>aktualna implementacja w Laravelu</p>
							<pre>
								class HigherOrderTapProxy
								{
									public $target;

									public function __construct($target)
									{
										$this->target = $target; //target in our case is $user model
									}

									//when we call a method it will trigger this function
									public function __call($method, $parameters)
									{
										$this->target->{$method}(...$parameters); //$user->update($parameters)

										return $this->target; //return $user;
									}
								}
							</pre>
						</aside>
					</section>

					<section>
						method chains
					</section>

					<section>
						<p>examples in the wild / laravel</p>
						<p>underscore.js</p>
						<p>...?</p>
					</section>

				</section>

				<!-- ###################################### TOOLS ###################################### -->

				<section data-markdown>
					<textarea data-template>
						## Wzorce, dobre praktyki i narzędzia
				
						Note:
						- http requests from PHPStorm
						- VSCode Live Share
						- nowy debugbar z hydrated models
					</textarea>
				</section>

				<!-- ###################################### FRONTEND ###################################### -->
				
				<section data-markdown>
					<textarea data-template>
						## Frontend
				
						Note:
						co tutaj?
					</textarea>
				</section>




				<section>
					<h2>Some Slide</h2>
				
					<aside class="notes">
						Oh hey, these are some notes. They'll be hidden in your presentation, but you can see them if you open the
						speaker notes window (hit »S« on your keyboard).
					</aside>
				</section>
				<section>
					<section data-transition="slide-in fade-out">
						<pre><code class="php" data-trim data-noescape>
							function tap($value, $callback = null)
							{
								if (is_null($callback)) {
									return new HigherOrderTapProxy($value);
								}	
							
								$callback($value);
							
								return $value;
							}
						</code></pre>
					</section>
					<section data-transition="zoom">
						<pre><code class="php" data-trim data-noescape>
							function tap($value, $callback = null)
							{
								if (is_null($callback)) {
									return new HigherOrderTapProxy($value);
								}	
							
								<mark>$callback($value);</mark>
							
								return $value;
							}
						</code></pre>
					</section>
				</section>
				<section>
					<!-- <pre><code class="php" data-trim data-line-numbers="4,8-11"> -->
					<pre><code class="php" data-trim data-noescape>
						function tap($value, $callback = null)
						{
							if (is_null($callback)) {
								return new HigherOrderTapProxy($value);
							}	
						
							$callback($value);
						
							return $value;
						}
					</code></pre>
				</section>
				<section>
					<pre><code class="hljs" data-trim data-line-numbers="4,8-11">
					import React, { useState } from 'react';
					
					function Example() {
					const [count, setCount] = useState(0);
					
					return (
						<div>
						<p>You clicked {count} times</p>
						<button onClick={() => setCount(count + 1)}>
							Click me
						</button>
						</div>
					);
					}
					</code></pre>
				</section>
				<section>
					<pre><code data-trim data-noescape>
				(def lazy-fib
				  (concat
				   [0 1]
				   <mark>((fn rfib [a b]</mark>
				        (lazy-cons (+ a b) (rfib b (+ a b)))) 0 1)))
					</code></pre>
				</section>
				<section>
					<p class="fragment" data-fragment-index="3">Appears last</p>
					<p class="fragment" data-fragment-index="1">Appears first</p>
					<p class="fragment" data-fragment-index="2">Appears second</p>
				</section>
				<section>
					<span class="fragment fade-in">
						<span class="fragment fade-out">I'll fade in, then out</span>
					</span>
				</section>
				<section>
					<p class="fragment grow">grow</p>
					<p class="fragment shrink">shrink</p>
					<p class="fragment fade-out">fade-out</p>
					<p class="fragment fade-up">fade-up (also down, left and right!)</p>
					<p class="fragment fade-in-then-out">fades in, then out when we move to the next step</p>
					<p class="fragment fade-in-then-semi-out">fades in, then obfuscate when we move to the next step</p>
					<p class="fragment highlight-current-blue">blue only once</p>
					<p class="fragment highlight-red">highlight-red</p>
					<p class="fragment highlight-green">highlight-green</p>
					<p class="fragment highlight-blue">highlight-blue</p>
				</section>
				<section data-markdown>
					<script type="text/template">
					<!-- .slide: data-background="#668000" -->
					Markdown content
					</script>
				</section>
				<section data-markdown>
					<script type="text/template">
						- Item 1 <!-- .element: class="fragment" data-fragment-index="2" -->
						- Item 2 <!-- .element: class="fragment" data-fragment-index="1" -->
					</script>
				</section>
				<section data-markdown data-background-color="#222">
					<textarea data-template>
						## Page title

						A paragraph with some text and a [link](http://hakim.se).
					</textarea>
				</section>
				<section>Slide 1</section>
				<section>Slide 2</section>
				<section>Single Horizontal Slide</section>
				<section>
					<section>Vertical Slide 1</section>
					<section>Vertical Slide 2</section>
					<section>Vertical Slide 3</section>
					<section>Vertical Slide 4</section>
				</section>
				<section>Slide 3</section>
				<section>Slide 4</section>
			</div>
		</div>

		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				controls: true,
				controlsTutorial: false,
				hash: true,
				overview: true,
				showNotes: true, // todo - change to false
				transition: 'slide', // none/fade/slide/convex/concave/zoom
				transitionSpeed: 'default', // default/fast/slow
				// Transition style for full page slide backgrounds
				backgroundTransition: 'fade', // none/fade/slide/convex/concave/zoom
				// Number of slides away from the current that are visible
				viewDistance: 3,
				// Parallax background image
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"
				// Parallax background size
				// parallaxBackgroundSize: '2100px 900px', // CSS syntax, e.g. "2100px 900px"
				// The "normal" size of the presentation, aspect ratio will be preserved
				// when the presentation is scaled to fit different resolutions. Can be
				// specified using percentage units.
				width: 960,
				height: 700,
				// Factor of the display size that should remain empty around the content
				margin: 0.1,
				// Bounds for smallest/largest possible scale to apply to content
				minScale: 0.2,
				maxScale: 1.5,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true },
					// Zoom in and out with Alt+click
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					// Speaker notes
					{ src: 'plugin/notes/notes.js', async: true },
				]
			});
			// shortcuts
			// ? - help
			// o - overview mode
			// s - speaker notes
		</script>
	</body>
</html>
